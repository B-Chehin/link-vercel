<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Test KWB</title>
    <style>
      body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; padding: 22px; }
      .card { max-width: 560px; margin: 0 auto; border: 1px solid #ddd; border-radius: 14px; padding: 16px; }
      button { width: 100%; padding: 12px 14px; font-size: 16px; border-radius: 10px; }
      a { word-break: break-all; }
      .muted { opacity: .75; font-size: 13px; }
      code { background: #f6f6f6; padding: 2px 6px; border-radius: 6px; }
    </style>
  </head>

  <body>
    <div class="card">
      <h3>Return to app (test)</h3>

      <p class="muted">URL web (quemada):</p>
      <p><code>https://link-vercel-topaz.vercel.app/kwb?status=success&from=link</code></p>

      <p class="muted">Deep link que vamos a abrir:</p>
      <p><a id="dl" href="https://link-vercel-topaz.vercel.app/kwb?status=success&from=link">rbus://kwb?status=success&from=link</a></p>

      <button id="btn">Volver a la app</button>

      <p class="muted" id="status" style="margin-top: 12px;"></p>
    </div>

    <script>
      const deepLink = "https://link-vercel-topaz.vercel.app/kwb?status=success&from=link";

      function openApp() {
        document.getElementById("status").textContent = "Intentando abrir: " + deepLink;
        window.location.href = deepLink;
      }

      // intento automático (puede ser bloqueado en WebView iOS si no hay gesto)
      setTimeout(openApp, 80);

      // intento con gesto de usuario (más confiable)
      document.getElementById("btn").addEventListener("click", openApp);
    </script>
  </body>
</html>

